{% extends "base.html" %}
{% block content %}
<h2>–°–ø–∏—Å–æ–∫ —Ä—ã–Ω–∫–æ–≤</h2>

<div style="margin-bottom: 15px;">
    <a href="{{ url_for('export_all') }}" class="btn blue">üì• –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö —Ä—ã–Ω–∫–æ–≤ (Excel)</a>
</div>

<table>
    <thead>
        <tr><th>–ù–∞–∑–≤–∞–Ω–∏–µ</th><th>–ì–æ—Ä–æ–¥</th><th>–°—É–±—ä–µ–∫—Ç</th><th>–†–µ–π—Ç–∏–Ω–≥</th><th>–û—Ç–∑—ã–≤–æ–≤</th></tr>
    </thead>
    <tbody>
        {% for m in markets %}
        <tr>
            <td>{{ m.name }}</td>
            <td>{{ m.city }}</td>
            <td>{{ m.state }}</td>
            <td>{{ m.stars_display }}</td>
            <td>{{ m.reviews }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<div class="pagination-controls">
  {% if current_page > 1 %}
    <a href="{{ url_for('markets', page=1) }}" class="btn">–ü–µ—Ä–≤–∞—è</a>
    <a href="{{ url_for('markets', page=current_page - 1) }}" class="btn">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∞—è</a>
  {% endif %}

  <span>–°—Ç—Ä–∞–Ω–∏—Ü–∞</span>
  <form method="get" class="page-form">
    <input
      type="number"
      name="page"
      min="1"
      max="{{ total_pages }}"
      value="{{ current_page }}"
      required
      style="width: 80px; display: inline-block;"
    >
    <button type="submit" class="btn green" style="margin: 0 0 0 5px;">–ü–µ—Ä–µ–π—Ç–∏</button>
  </form>
  <span>–∏–∑ {{ total_pages }}</span>

  {% if current_page < total_pages %}
    <a href="{{ url_for('markets', page=current_page + 1) }}" class="btn">–°–ª–µ–¥—É—é—â–∞—è ‚Üí</a>
    <a href="{{ url_for('markets', page=total_pages) }}" class="btn">–ü–æ—Å–ª–µ–¥–Ω—è—è</a>
  {% endif %}
</div>
{% endblock %}