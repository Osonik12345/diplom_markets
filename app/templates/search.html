{% extends "base.html" %}
{% block content %}
<h2>–ü–æ–∏—Å–∫</h2>

<form method="GET">
    <label><strong>–¢–∏–ø –ø–æ–∏—Å–∫–∞:</strong></label><br>
    <div class="radio-group">
        <label><input type="radio" name="mode" value="city" {% if mode=='city' %}checked{% endif %}> –ì–æ—Ä–æ–¥</label><br>
        <label><input type="radio" name="mode" value="state" {% if mode=='state' %}checked{% endif %}> –°—É–±—ä–µ–∫—Ç</label><br>
        <label><input type="radio" name="mode" value="zip" {% if mode=='zip' %}checked{% endif %}> –ò–Ω–¥–µ–∫—Å</label><br>
    </div>

    <br>
    <label><input type="checkbox" name="radius" value="1" {% if radius %}checked{% endif %}> –ü–æ —Ä–∞–¥–∏—É—Å—É (–µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–æ ‚Äî –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è –Ω–∏–∂–µ)</label><br>

    <div class="radius-fields">
        <label>–®–∏—Ä–æ—Ç–∞ (y):</label>
        <input type="number" step="any" name="lat" value="{{ lat or '' }}" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä, 42.3601"><br>
        <label>–î–æ–ª–≥–æ—Ç–∞ (x):</label>
        <input type="number" step="any" name="lon" value="{{ lon or '' }}" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä, -71.0589"><br>
        <label>–†–∞–¥–∏—É—Å (–º–∏–ª–∏):</label>
        <input type="number" step="any" name="radius_val" value="{{ radius_val or '' }}" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä, 10"><br>
    </div>

    <br>
    <label><strong>–ü–æ–∏—Å–∫ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é:</strong></label><br>
    <input type="text" name="q" value="{{ q or '' }}" placeholder="–í–≤–µ–¥–∏—Ç–µ –≥–æ—Ä–æ–¥, —Å—É–±—ä–µ–∫—Ç –∏–ª–∏ –∏–Ω–¥–µ–∫—Å"><br>

    <br>
    <label><strong>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</strong></label><br>
    <div class="radio-group">
        <label><input type="radio" name="sort" value="0" {% if sort=='0' %}checked{% endif %}> –ë–µ–∑ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏</label><br>
        <label><input type="radio" name="sort" value="1" {% if sort=='1' %}checked{% endif %}> –ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é ‚Üë</label><br>
        <label><input type="radio" name="sort" value="2" {% if sort=='2' %}checked{% endif %}> –ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é ‚Üì</label><br>
        <label><input type="radio" name="sort" value="3" {% if sort=='3' %}checked{% endif %}> –ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É ‚Üì</label><br>
    </div>

    <br>
    <button type="submit" class="btn blue">üîç –ù–∞–π—Ç–∏</button>
</form>

{% if results %}
    <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã ({{ results|length }}):</h3>
    <ul>
    {% for m in results %}
        <li>
            {{ m.name }} | {{ m.city }}, {{ m.state }}
            {% if m.distance is defined %} | {{ m.distance }} –º–∏–ª—å{% endif %}
            {% if m.rating is defined %} | ‚òÖ{{ "%.1f"|format(m.rating) }}{% endif %}
            <br>
            <a href="{{ url_for('detail_page', name=m.name) }}">–ü–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª–∏</a>
        </li>
    {% endfor %}
    </ul>
{% endif %}
{% endblock %}